# 도메인 모델

### 사용자 (User)
_Entity_
### 속성
- `id`: 사용자 ID
- `name`: 사용자 이름
- `phoneNumber`: 사용자 전화번호

### 알림 (Notification)
_Entity_
### 속성
- `id`: 예약 ID
- `userId`: 사용자 ID
- `idempotencyKey`: 예약 멱등성 키
- `status`: 알림 상태
- `attemptCount`: 알림 발송 시도 횟수
- `maxAttemptCount`: 최대 알림 발송 시도 횟수
- `phoneNumber`: 알림 발송 전화번호
- `title`: 알림 제목
- `cotents`: 알림 내용
- `reservedAt`: 알림 발송 예약된 요청 일시
- `retryAt`: 알림 발송 재시도 일시
- `createdAt`: 생성된 일시
### 행위
- `static register():` 알림 발송 예약을 접수한다
- `cancelNotification():` 접수된 알림 발송 예약을 취소한다
- `checkCancelableStatus():` 예약 취소가 가능한 상태인지 확인한다
- `changeStatus():` 알림 상태를 변경한다
- `increaseAttemptCount():` 알림 발송 시도 횟수를 증가시킨다
- `handleNotificationFailure():` 알림 발송 실패 시 알림 발송 시도 횟수 증가, 최대 알림 발송 시도 횟수를 검증하여 상태를 업데이트한다
### 규칙
- 알림 발송 예약 접수 후 상태는 예약됨
- 알림 발송은 상태가 예약됨일 경우에만 발송 시도가 가능하다
- 알림 발송 예약 취소 요청 시 예약됨 상태에서만 취소가 가능하다
- 알림 발송 시도는 최대 3회까지만 가능하며, 3회 초과 시 상태가 취소됨으로 변경된다
### 알림 상태(NotificationStatus)
_Enum_
### 상수
- `RESERVED`: 예약됨
- `PENDING`: 발송 대기
- `SENT`: 발송 완료
- `CANCELED`: 예약 취소
- `FAILED`: 발송 실패

---

### 알림 발송 시도 이력(NotificationAttempt)
_Entity_
### 속성
- `id`: 알림 발송 이력 ID
- `notificationId`: 알림 ID
- `attemptNo`: 알림 발송 시퀀스 번호
- `result`: 알림 발송 결과
- `createdAt`: 생성된 일시
### 행위
- `static create():` 알림 발송 시도 이력을 생성한다
### 알림 발생 시도 상태(NotificationAttemptResult)
_Enum_
### 상수
- `SUCCES`: 발송 완료
- `FAILURE`: 발송 실패